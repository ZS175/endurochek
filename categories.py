# categories.py

categories = {
    'Двигатель': {
        'tasks': {
            'Замена масла': 15,
            'Чистка воздушного фильтра': 10,
            'Регулировка клапанов': 80,
            'Осмотр и чистка свечи зажигания': 20,
            'Замена свечи зажигания': 40,
        },
    },
    'Подвеска': {
        'tasks': {
            'Осмотр и чистка сальников вилки': 25,
            'Замена масла в вилке': 50,
            'Регулировка заднего амортизатора': 40,
            'Смазка шарниров задней подвески': 30,
        },
    },
    'Тормоза': {
        'tasks': {
            'Осмотр тормозных колодок': 60,
            'Замена тормозной жидкости': 100,
        },
    },
    'Колеса': {
        'tasks': {
            'Осмотр подшипников осей': 50,
            'Проверка натяжения спиц': 30,
            'Осмотр и замена покрышек': 80,
            'Регулировка давления в шинах': 5,
        },
    },
    'Цепь': {
        'tasks': {
            'Проверка и смазка цепи': 5,
            'Проверка износа зубьев ведущей звезды': 30,
            'Проверка износа зубьев ведомой звезды': 30,
            'Замена цепи и звезд': 150,
        },
    },
    'Прочее': {
        'tasks': {
            'Регулировка и чистка троса газа': 30,
            'Регулировка и чистка троса сцепления': 30,
            'Проверка аккумулятора': 50,
        },
    },
}

def calculate_progress(last_service, interval, current_hours):
    if last_service is None or interval == 0:
        return 0
    elapsed = max(0, current_hours - last_service)
    progress = min(100, int((elapsed / interval) * 100))
    return progress